<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Engage Video Connect</title>
    <link rel="stylesheet" href="{% static 'css/semantic.min.css' %}">
    <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
    <script type="text/javascript" src="{% static 'js/semantic.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="container">
        <div id="video-box">
            <div>
                <video id="local-video" class="video-style" width="480" height="320" autoplay playsinline></video>
                <canvas hidden id="blur-canvas"></canvas>
            </div>
            <div class="video-buttons">
                <div style="position: relative;left: -50%;">
                    <button id = "toggle-audio-button" class="circular ui icon button">Mute</button>
                    <button id = "toggle-video-button" class="circular ui icon button">Video off</button>
                    <a href="/video"><button id = "disconnect-button" class="circular ui icon button">Disconnect</button></a>
                    <button id = "btn-share-screen" class="circular ui icon button">Share Screen</button>
                    <button id = "multiple-cameras-button" class="circular ui icon button">Multiple Cameras Mode</button>
                    <button id = "toggle-blur-mode" class="circular ui icon button">Blur Video</button>
                </div>
            </div>
        </div>
        <button class="openbtn circular ui icon button" onclick="openNav()">Chat</button>
        <div id = "chat" class='sidepanel'>
            <h3>Chat Messages</h3>
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <div id = "messages">
                <ul id = "message-list"></ul>
            </div>
        
            <div class='field send-message'>
                <input id = "message" maxlength="100" style="width: 70%;"/><button id="send-msg-button" class="ui icon button">Send</button>
            </div>
        </div>
    </div>
    <!-- Require the peer dependencies of face-landmarks-detection. -->
    <script src="https://unpkg.com/@tensorflow/tfjs-core@2.4.0/dist/tf-core.js"></script>
    <script src="https://unpkg.com/@tensorflow/tfjs-converter@2.4.0/dist/tf-converter.js"></script>

    <!-- You must explicitly require a TF.js backend if you're not using the tfjs union bundle. -->
    <script src="https://unpkg.com/@tensorflow/tfjs-backend-webgl@2.4.0/dist/tf-backend-webgl.js"></script>
    <!-- Alternatively you can use the WASM backend: <script src="https://unpkg.com/@tensorflow/tfjs-backend-wasm@2.4.0/dist/tf-backend-wasm.js"></script> -->

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"></script>

    <!-- Require face-landmarks-detection itself. -->
    <script src="https://unpkg.com/@tensorflow-models/face-landmarks-detection@0.0.1/dist/face-landmarks-detection.js"></script>
    
    {{ username|json_script:"passed"}}
    <script type="text/javascript" src="{% static 'js/connect.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/chat.js'%}"></script>
    <script type="text/javascript" src="{% static 'js/multipleCameras.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/blur.js' %}"></script>
    
</body>
</html>